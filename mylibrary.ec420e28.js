var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},a={},n=e.parcelRequired76b;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in a){var n=a[e];delete a[e];var s={id:e,exports:{}};return t[e]=s,n.call(s.exports,s,s.exports),s.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){a[e]=t},e.parcelRequired76b=n);var s=n("3fz09");s=n("3fz09");var i=n("it60l"),r=n("185lj"),o=n("9Co7P"),l=n("bTcpz"),c=n("2nhTy"),d=n("lFT8c"),u=n("c8VpK"),p=(s=n("3fz09"),n("1fedI")),f=n("bRnc2");function g(e){e.length||s.refs.tuiContainer.classList.add("visually-hidden");const t=e.map((({original_title:e,title:t,poster_path:a,id:n,genres:s,release_date:i})=>{let r=null,o=null;const l=s.map((e=>e.id)),c=(0,p.posterÐ¡heck)(a),d=f.genresArr.reduce(((e,t)=>(l.includes(t.id)&&e.push(t.name),e)),[]);return d.length>3?(r=d.slice(0,2),r.splice(2,1,"Other")):r=0===d.length?["Genres not found"]:d,o=""===i?"Release data no found":i.slice(0,4),`\n          <li class="film__item" data-id="${n}">\n          <img src="${c}" class="film__img" alt="${e}" />\n          <p class="film__title">${t}</p>\n          <p class="film__genre">${r.join(", ")} | ${o}</p>\n        </li>`})).join("");return s.refs.galleryLibrary.innerHTML=t}function m(){s.refs.btnWathed.dataset.watch="active",s.refs.btnQueue.dataset.queue="";try{const e=JSON.parse(localStorage.getItem("watch"));if(!e||0===e.length)return s.refs.galleryLibrary.innerHTML='<div class="message-wrap" >\n      <p class="sorry">Sorry...</p>\n      <p class="message">\n        You haven\'t added any movies yet. Hope you fix this soon :)\n      </p>\n      <a href="/src/index.html" class="library__button accent">Filmoteka</a>\n    </div>',void s.refs.tuiContainer.classList.add("visually-hidden");{c.options.totalItems=e.length;let t=0,a=20;const n=e=>{t=e*c.options.itemsPerPage-20,a=e*c.options.itemsPerPage};s.refs.tuiContainer.classList.remove("visually-hidden"),g(e.slice(t,a));new Pagination(s.refs.tuiContainer,c.options).on("beforeMove",(s=>{const i=s.page;n(i),g(e.slice(t,a))}))}}catch(e){console.log(e.message)}}s.refs.btnWathed.addEventListener("click",m),s.refs.galleryLibrary.addEventListener("click",(async function(e){if("film__item"!==e.target.parentElement.className)return;(0,l.onOpenModal)();const t=e.target.parentElement.dataset.id,a=await r.serverApi.getDetailsMovie(t),n=await(0,i.movieDescriptionMurkup)(a);s.refs.movieDescription.insertAdjacentHTML("beforeend",n),(0,d.makeWatchTextContent)(a),(0,d.makeQueueTextContent)(a);const c=document.querySelector("[data-add-watched]"),p=document.querySelector("[data-add-queue]"),f=document.querySelector("[data-modal-close]"),m=document.querySelector(".btn-ytb"),y=document.querySelector(".icon-youtube");c.addEventListener("click",(()=>{(0,o.onAddWatchClick)(a);const e=JSON.parse(localStorage.getItem("watch"));"active"===s.refs.btnWathed.dataset.watch&&g(e)})),p.addEventListener("click",(()=>{(0,o.onAddQueueClick)(a);const e=JSON.parse(localStorage.getItem("queue"));"active"===s.refs.btnQueue.dataset.queue&&g(e)})),r.serverApi.getTrailer(t).then((({results:e})=>{0!==e.length?(y.classList.add("icon-youtube__enable"),y.classList.remove("icon-youtube__disabled")):(y.classList.remove("icon-youtube__enable"),y.classList.add("icon-youtube__disabled"),m.setAttribute("disabled",!0),Notiflix.Notify.failure("Oh! Unfortunately there is no trailer",{position:"center-top",fontFamily:"inherit",borderRadius:"25px",clickToClose:!0}))})),m.addEventListener("click",u.handleClick),f.addEventListener("click",l.closeModal)}));s=n("3fz09"),c=n("2nhTy");function y(){s.refs.btnWathed.dataset.watch="",s.refs.btnQueue.dataset.queue="active";try{const e=JSON.parse(localStorage.getItem("queue"));if(!e||0===e.length)return s.refs.galleryLibrary.innerHTML='<div class="message-wrap" >\n      <p class="sorry">Sorry...</p>\n      <p class="message">\n        You haven\'t added any movies yet. Hope you fix this soon :)\n      </p>\n      <a href="/src/index.html" class="library__button accent">Filmoteka</a>\n    </div>',void s.refs.tuiContainer.classList.add("visually-hidden");{c.options.totalItems=e.length;let t=0,a=20;const n=e=>{t=e*c.options.itemsPerPage-20,a=e*c.options.itemsPerPage};s.refs.tuiContainer.classList.remove("visually-hidden"),g(e.slice(t,a));new Pagination(s.refs.tuiContainer,c.options).on("beforeMove",(s=>{const i=s.page;n(i),g(e.slice(t,a))}))}}catch(e){console.log(e.message)}}s.refs.btnQueue.addEventListener("click",y);r=n("185lj");!function(){r.serverApi.setlang(JSON.parse(localStorage.getItem("language")));try{const e=JSON.parse(localStorage.getItem("watch")),t=JSON.parse(localStorage.getItem("queue"));e||t?e&&0!==e.length?m():t&&0!==t.length&&!e||0===e.length?y():s.refs.galleryLibrary.insertAdjacentHTML("beforeend",'<div class="message-wrap" >\n      <p class="sorry">Sorry...</p>\n      <p class="message">\n        You haven\'t added any movies yet. Hope you fix this soon :)\n      </p>\n      <a href="/src/index.html" class="library__button accent">Filmoteka</a>\n    </div>'):s.refs.galleryLibrary.insertAdjacentHTML("beforeend",'<div class="message-wrap" >\n      <p class="sorry">Sorry...</p>\n      <p class="message">\n        You haven\'t added any movies yet. Hope you fix this soon :)\n      </p>\n      <a href="/src/index.html" class="library__button accent">Filmoteka</a>\n    </div>')}catch(e){console.log(e.message)}}(),n("bTcpz"),n("7bYU0"),n("2nhTy"),n("eobyt"),n("3TU0j"),n("3hXKf"),n("2ix2C");
//# sourceMappingURL=mylibrary.ec420e28.js.map
