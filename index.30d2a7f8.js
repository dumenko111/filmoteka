!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},n={},a=t.parcelRequired76b;null==a&&((a=function(e){if(e in r)return r[e].exports;if(e in n){var t=n[e];delete n[e];var a={id:e,exports:{}};return r[e]=a,t.call(a.exports,a,a.exports),a.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){n[e]=t},t.parcelRequired76b=a),a("5xtVg");var i=a("jaaYu");if((p=a("hiFhO")).refs.langValue.addEventListener("change",(function(e){var t=e.target.value;i.serverApi.setlang(t),localStorage.setItem("language",JSON.stringify(t)),location.reload()})),localStorage.getItem("language")){var s=JSON.parse(localStorage.getItem("language"));p.refs.langValue.value=s,i.serverApi.setlang(s)}i=a("jaaYu");if((p=a("hiFhO")).refs.trend.addEventListener("change",(function(e){var t=e.target.value;i.serverApi.setTrend(t),localStorage.setItem("selected-trend",JSON.stringify(t)),location.reload()})),localStorage.getItem("selected-trend")){var o=JSON.parse(localStorage.getItem("selected-trend"));p.refs.trend.value=o,i.serverApi.setTrend(o)}var l,c=a("bpxeT"),u=a("2TvXO"),p=a("hiFhO"),d=(i=a("jaaYu"),c=a("bpxeT"),u=a("2TvXO"),p=a("hiFhO"),i=a("jaaYu"),a("9PJ7S")),f=a("jcFG7"),v=a("j1lrD"),g=a("4zVoc"),h=(v=a("j1lrD"),new Pagination(p.refs.tuiContainer,f.options));function m(e){i.serverApi.setPage(1);var t=e.map((function(e){var t=e.original_title,r=e.title,n=e.poster_path,a=e.id,i=e.genre_ids,s=e.release_date,o=(0,d.posterÐ¡heck)(n),l=null,c=null,u=g.genresArr.reduce((function(e,t){return i.includes(t.id)&&e.push(t.name),e}),[]);return u.length>3?(l=u.slice(0,2)).splice(2,1,"Other"):l=0===u.length?["Genres not found"]:u,c=s?s.slice(0,4):"Release data no found",'\n        <li class="film__item" data-id="'.concat(a,'">\n        <img src="').concat(o,'" class="film__img" alt="').concat(t,'" />\n        <div>\n        <p class="film__title">').concat(r,'</p>\n        <p class="film__genre">').concat(l.join(", ")," | ").concat(c,"</p></div>\n      </li>")})).join("");return"ru"===p.refs.langValue.value?p.refs.gallery.innerHTML='<li class="warship"><img src="'.concat(warship,'" /></li>'):p.refs.gallery.innerHTML=t}function y(){return b.apply(this,arguments)}function b(){return(b=e(c)(e(u).mark((function t(){var r;return e(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=[],"top"!==p.refs.trend.value){e.next=8;break}return e.next=5,i.serverApi.getTop();case 5:r=e.sent,e.next=17;break;case 8:if("popular"!==p.refs.trend.value){e.next=14;break}return e.next=11,i.serverApi.getPopular();case 11:r=e.sent,e.next=17;break;case 14:return e.next=16,i.serverApi.getPopularMovie();case 16:r=e.sent;case 17:i.serverApi.setTotalResults(r.total_results),m(r.results),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),console.log(e.t0);case 24:(0,v.spinnerStop)();case 25:case"end":return e.stop()}}),t,null,[[0,21]])})))).apply(this,arguments)}(0,v.spinnerPlay)(),h.on("beforeMove",(l=e(c)(e(u).mark((function t(r){var n;return e(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,v.spinnerPlay)(),h.setTotalItems(i.serverApi.totalResults),"top"===p.refs.trend.value||"popular"===p.refs.trend.value?(h.setTotalItems(1e4),i.serverApi.setTotalResults(1e4)):h.setTotalItems(i.serverApi.totalResults),n=r.page,i.serverApi.setPage(n),y();case 6:case"end":return e.stop()}}),t)}))),function(e){return l.apply(this,arguments)}));var x=a("kiFmR"),k=a("5xtVg"),_=a("4cXS4"),T=a("5HOzi"),A=a("dkUq4");v=a("j1lrD");function S(){return(S=e(c)(e(u).mark((function t(r){var n,a,s,o,l,c,d,f;return e(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("film__item"===r.target.parentElement.className){e.next=2;break}return e.abrupt("return");case 2:return(0,k.onOpenModal)(),(0,v.spinnerPlay)(),n=r.target.parentElement.dataset.id,e.next=7,i.serverApi.getDetailsMovie(n);case 7:return a=e.sent,e.next=10,(0,x.movieDescriptionMurkup)(a);case 10:s=e.sent,p.refs.movieDescription.insertAdjacentHTML("beforeend",s),(0,v.spinnerStop)(),(0,T.makeWatchTextContent)(a),(0,T.makeQueueTextContent)(a),o=document.querySelector("[data-add-watched]"),l=document.querySelector("[data-add-queue]"),c=document.querySelector("[data-modal-close]"),d=document.querySelector(".btn-ytb"),f=document.querySelector(".icon-youtube"),i.serverApi.getTrailer(n).then((function(e){0!==e.results.length?(f.classList.add("icon-youtube__enable"),f.classList.remove("icon-youtube__disabled")):(f.classList.remove("icon-youtube__enable"),f.classList.add("icon-youtube__disabled"),d.setAttribute("disabled",!0),Notiflix.Notify.failure("Oh! Unfortunately there is no trailer",{position:"center-top",fontFamily:"inherit",borderRadius:"25px",clickToClose:!0}))})),o.addEventListener("click",(function(){return(0,_.onAddWatchClick)(a)})),l.addEventListener("click",(function(){return(0,_.onAddQueueClick)(a)})),d.addEventListener("click",A.handleClick),c.addEventListener("click",k.closeModal);case 25:case"end":return e.stop()}}),t)})))).apply(this,arguments)}y(),p.refs.gallery.addEventListener("click",(function(e){return S.apply(this,arguments)}));c=a("bpxeT"),u=a("2TvXO"),p=a("hiFhO"),i=a("jaaYu"),f=a("jcFG7"),v=a("j1lrD");var w=" ";function L(){return(L=e(c)(e(u).mark((function t(r){return e(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),(0,v.spinnerPlay)(),document.querySelector(".header__form-input").addEventListener("change",(function(){i.serverApi.setPage(1),i.serverApi.setRequestCount()})),w=r.currentTarget.elements.serch_film.value.trim().toLowerCase()){e.next=9;break}return Notiflix.Notify.failure("Enter the name of the movie",{position:"center-top",fontFamily:"inherit",borderRadius:"25px",clickToClose:!0}),(0,v.spinnerStop)(),e.abrupt("return");case 9:return e.next=11,O();case 11:(0,v.spinnerStop)(),new Pagination(p.refs.tuiContainer,f.options).on("beforeMove",(function(e){var t=e.page;i.serverApi.setPage(t),i.serverApi.incrementRequestCount(),O()}));case 14:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function O(){return j.apply(this,arguments)}function j(){return(j=e(c)(e(u).mark((function t(){var r,n,a;return e(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.serverApi.getMovieOnDemand(w);case 2:if(r=e.sent,n=r.results,a=r.total_results,f.options.totalItems=a,a<20&&0!==a?p.refs.tuiContainer.classList.add("visually-hidden"):p.refs.tuiContainer.classList.remove("visually-hidden"),0!==n.length){e.next=13;break}return y(),Notiflix.Notify.failure("Search result not successful. Enter the correct movie name and",{position:"center-top",fontFamily:"inherit",borderRadius:"25px",clickToClose:!0}),w=" ",history.goBack(),e.abrupt("return");case 13:m(n);case 14:case"end":return e.stop()}}),t)})))).apply(this,arguments)}p.refs.formRef.addEventListener("submit",(function(e){return L.apply(this,arguments)})),a("jcFG7"),a("aZhHc"),a("3ngM5"),a("dkUq4"),a("dUjMA"),a("fDiVl"),a("j1lrD"),a("iNWLi")}();
//# sourceMappingURL=index.30d2a7f8.js.map
