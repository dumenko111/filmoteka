var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},r=e.parcelRequired76b;null==r&&((r=function(e){if(e in t)return t[e].exports;if(e in n){var r=n[e];delete n[e];var i={id:e,exports:{}};return t[e]=i,r.call(i.exports,i,i.exports),i.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){n[e]=t},e.parcelRequired76b=r),r("bTcpz");var i=r("185lj");if((s=r("3fz09")).refs.langValue.addEventListener("change",(function(e){const t=e.target.value;i.serverApi.setlang(t),localStorage.setItem("language",JSON.stringify(t)),location.reload()})),localStorage.getItem("language")){const e=JSON.parse(localStorage.getItem("language"));s.refs.langValue.value=e,i.serverApi.setlang(e)}i=r("185lj");if((s=r("3fz09")).refs.trend.addEventListener("change",(function(e){const t=e.target.value;i.serverApi.setTrend(t),localStorage.setItem("selected-trend",JSON.stringify(t)),location.reload()})),localStorage.getItem("selected-trend")){const e=JSON.parse(localStorage.getItem("selected-trend"));s.refs.trend.value=e,i.serverApi.setTrend(e)}var s=r("3fz09"),a=(i=r("185lj"),s=r("3fz09"),i=r("185lj"),r("1fedI")),o=r("2nhTy"),l=r("04jNI"),c=r("bRnc2");l=r("04jNI");const d=new Pagination(s.refs.tuiContainer,o.options);function u(e){i.serverApi.setPage(1);const t=e.map((({original_title:e,title:t,poster_path:n,id:r,genre_ids:i,release_date:s})=>{const o=(0,a.posterÐ¡heck)(n);let l=null,d=null;const u=c.genresArr.reduce(((e,t)=>(i.includes(t.id)&&e.push(t.name),e)),[]);return u.length>3?(l=u.slice(0,2),l.splice(2,1,"Other")):l=0===u.length?["Genres not found"]:u,d=s?s.slice(0,4):"Release data no found",`\n        <li class="film__item" data-id="${r}">\n        <img src="${o}" class="film__img" alt="${e}" />\n        <div>\n        <p class="film__title">${t}</p>\n        <p class="film__genre">${l.join(", ")} | ${d}</p></div>\n      </li>`})).join("");return"ru"===s.refs.langValue.value?s.refs.gallery.innerHTML=`<li class="warship"><img src="${warship}" /></li>`:s.refs.gallery.innerHTML=t}async function p(){try{let e=[];e="top"===s.refs.trend.value?await i.serverApi.getTop():"popular"===s.refs.trend.value?await i.serverApi.getPopular():await i.serverApi.getPopularMovie(),i.serverApi.setTotalResults(e.total_results),u(e.results)}catch(e){console.log(e)}(0,l.spinnerStop)()}(0,l.spinnerPlay)(),d.on("beforeMove",(async e=>{(0,l.spinnerPlay)(),d.setTotalItems(i.serverApi.totalResults),"top"===s.refs.trend.value||"popular"===s.refs.trend.value?(d.setTotalItems(1e4),i.serverApi.setTotalResults(1e4)):d.setTotalItems(i.serverApi.totalResults);const t=e.page;i.serverApi.setPage(t),p()}));var f=r("it60l"),g=r("bTcpz"),v=r("9Co7P"),m=r("lFT8c"),y=r("c8VpK");l=r("04jNI");p(),s.refs.gallery.addEventListener("click",(async function(e){if("film__item"!==e.target.parentElement.className)return;(0,g.onOpenModal)(),(0,l.spinnerPlay)();const t=e.target.parentElement.dataset.id,n=await i.serverApi.getDetailsMovie(t),r=await(0,f.movieDescriptionMurkup)(n);s.refs.movieDescription.insertAdjacentHTML("beforeend",r),(0,l.spinnerStop)(),(0,m.makeWatchTextContent)(n),(0,m.makeQueueTextContent)(n);const a=document.querySelector("[data-add-watched]"),o=document.querySelector("[data-add-queue]"),c=document.querySelector("[data-modal-close]"),d=document.querySelector(".btn-ytb"),u=document.querySelector(".icon-youtube");i.serverApi.getTrailer(t).then((({results:e})=>{0!==e.length?(u.classList.add("icon-youtube__enable"),u.classList.remove("icon-youtube__disabled")):(u.classList.remove("icon-youtube__enable"),u.classList.add("icon-youtube__disabled"),d.setAttribute("disabled",!0),Notiflix.Notify.failure("Oh! Unfortunately there is no trailer",{position:"center-top",fontFamily:"inherit",borderRadius:"25px",clickToClose:!0}))})),a.addEventListener("click",(()=>(0,v.onAddWatchClick)(n))),o.addEventListener("click",(()=>(0,v.onAddQueueClick)(n))),d.addEventListener("click",y.handleClick),c.addEventListener("click",g.closeModal)}));s=r("3fz09"),i=r("185lj"),o=r("2nhTy"),l=r("04jNI");let h=" ";async function b(){const e=await i.serverApi.getMovieOnDemand(h),t=e.results,n=e.total_results;if(o.options.totalItems=n,n<20&&0!==n?s.refs.tuiContainer.classList.add("visually-hidden"):s.refs.tuiContainer.classList.remove("visually-hidden"),0===t.length)return p(),Notiflix.Notify.failure("Search result not successful. Enter the correct movie name and",{position:"center-top",fontFamily:"inherit",borderRadius:"25px",clickToClose:!0}),h=" ",void history.goBack();u(t)}s.refs.formRef.addEventListener("submit",(async function(e){e.preventDefault(),(0,l.spinnerPlay)();if(document.querySelector(".header__form-input").addEventListener("change",(()=>{i.serverApi.setPage(1),i.serverApi.setRequestCount()})),h=e.currentTarget.elements.serch_film.value.trim().toLowerCase(),!h)return Notiflix.Notify.failure("Enter the name of the movie",{position:"center-top",fontFamily:"inherit",borderRadius:"25px",clickToClose:!0}),void(0,l.spinnerStop)();await b(),(0,l.spinnerStop)();new Pagination(s.refs.tuiContainer,o.options).on("beforeMove",(e=>{const t=e.page;i.serverApi.setPage(t),i.serverApi.incrementRequestCount(),b()}))})),r("2nhTy"),r("7bYU0"),r("eobyt"),r("c8VpK"),r("3TU0j"),r("3hXKf"),r("04jNI"),r("2ix2C");
//# sourceMappingURL=index.55a281f5.js.map
